.generate-brd-page {
  padding: var(--spacing-xl);
  max-width: 1200px;
  margin: 0 auto;
}

.page-header {
  margin-bottom: var(--spacing-xl);
}

.page-header h1 {
  color: var(--color-primary);
  font-size: var(--font-size-2xl);
  font-weight: var(--font-weight-bold);
  margin-bottom: var(--spacing-sm);
}

.page-header p {
  color: var(--color-gray-500);
  font-size: var(--font-size-base);
}

/* Form Container */
.brd-form-container {
  display: grid;
  grid-template-columns: 1fr 300px;
  gap: var(--spacing-xl);
}

.brd-form-container.single-column {
  grid-template-columns: 1fr;
  max-width: 800px;
}

/* Form Groups */
.form-group {
  margin-bottom: var(--spacing-xl);
}

.form-group label {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  font-weight: var(--font-weight-semibold);
  color: var(--color-primary);
  margin-bottom: var(--spacing-sm);
  font-size: var(--font-size-sm);
}

.form-group label svg {
  color: var(--color-teal);
}

.input-hint {
  font-size: var(--font-size-xs);
  color: var(--color-gray-500);
  margin-top: var(--spacing-sm);
}

/* Dropdown */
.dropdown-container {
  position: relative;
}

.dropdown-trigger {
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--spacing-md) var(--spacing-lg);
  background: var(--color-white);
  border: 2px solid var(--color-gray-300);
  border-radius: var(--radius-lg);
  font-size: var(--font-size-base);
  text-align: left;
  cursor: pointer;
  transition: all var(--transition-fast);
}

.dropdown-trigger:hover:not(:disabled) {
  border-color: var(--color-accent);
}

.dropdown-trigger:disabled {
  opacity: 0.7;
  cursor: not-allowed;
}

.dropdown-trigger.open {
  border-color: var(--color-accent);
  border-bottom-left-radius: 0;
  border-bottom-right-radius: 0;
}

.dropdown-trigger .placeholder {
  color: var(--color-gray-300);
}

.dropdown-trigger .loading-text {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  color: var(--color-gray-500);
}

.dropdown-trigger .selected-repo {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.dropdown-trigger .selected-repo .repo-name {
  font-weight: var(--font-weight-medium);
  color: var(--color-primary);
}

.dropdown-trigger .selected-repo .repo-url {
  font-size: var(--font-size-xs);
  color: var(--color-gray-500);
}

.dropdown-trigger .chevron {
  color: var(--color-gray-500);
  transition: transform var(--transition-fast);
}

.dropdown-trigger .chevron.rotated {
  transform: rotate(180deg);
}

.dropdown-menu {
  position: absolute;
  top: 100%;
  left: 0;
  right: 0;
  background: var(--color-white);
  border: 2px solid var(--color-accent);
  border-top: none;
  border-radius: 0 0 var(--radius-lg) var(--radius-lg);
  box-shadow: var(--shadow-lg);
  max-height: 300px;
  overflow-y: auto;
  z-index: 100;
}

.dropdown-item {
  width: 100%;
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  padding: var(--spacing-md) var(--spacing-lg);
  background: transparent;
  border: none;
  text-align: left;
  cursor: pointer;
  transition: background-color var(--transition-fast);
}

.dropdown-item:hover {
  background: var(--color-pale-cyan);
}

.dropdown-item.selected {
  background: var(--color-pale-cyan);
}

.dropdown-item svg:first-child {
  color: var(--color-teal);
  flex-shrink: 0;
}

.dropdown-item .repo-details {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.dropdown-item .repo-name {
  font-weight: var(--font-weight-medium);
  color: var(--color-primary);
}

.dropdown-item .repo-meta {
  font-size: var(--font-size-xs);
  color: var(--color-gray-500);
}

.dropdown-item .check-icon {
  color: var(--color-success);
}

.dropdown-error,
.dropdown-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--spacing-sm);
  padding: var(--spacing-xl);
  text-align: center;
  color: var(--color-gray-500);
}

.dropdown-error svg,
.dropdown-empty svg {
  color: var(--color-warning);
}

.dropdown-error button {
  margin-top: var(--spacing-sm);
  padding: var(--spacing-xs) var(--spacing-md);
  background: var(--color-primary);
  color: var(--color-white);
  border: none;
  border-radius: var(--radius-md);
  cursor: pointer;
}

/* Textarea */
.textarea {
  width: 100%;
  padding: var(--spacing-md) var(--spacing-lg);
  border: 2px solid var(--color-gray-300);
  border-radius: var(--radius-lg);
  font-family: var(--font-family);
  font-size: var(--font-size-base);
  line-height: 1.6;
  resize: vertical;
  min-height: 150px;
  transition: border-color var(--transition-fast);
}

.textarea:focus {
  outline: none;
  border-color: var(--color-accent);
}

.textarea::placeholder {
  color: var(--color-gray-300);
}

/* Error Message */
.error-message {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  padding: var(--spacing-md) var(--spacing-lg);
  background: var(--color-error-light);
  color: var(--color-error);
  border-radius: var(--radius-lg);
  margin-bottom: var(--spacing-lg);
}

/* Form Actions */
.form-actions {
  display: flex;
  justify-content: flex-end;
}

.btn-lg {
  padding: var(--spacing-md) var(--spacing-xl);
  font-size: var(--font-size-lg);
}

/* Generation Progress */
.generation-progress {
  margin-top: var(--spacing-xl);
  text-align: center;
}

.generation-progress .progress-bar {
  height: 4px;
  background: var(--color-gray-100);
  border-radius: var(--radius-full);
  overflow: hidden;
  margin-bottom: var(--spacing-md);
}

.generation-progress .progress-fill.indeterminate {
  width: 30%;
  animation: indeterminate 1.5s ease-in-out infinite;
}

@keyframes indeterminate {
  0% {
    transform: translateX(-100%);
  }
  100% {
    transform: translateX(400%);
  }
}

.generation-progress p {
  color: var(--color-gray-500);
  font-size: var(--font-size-sm);
}


/* =============================================================================
   BRD Review Screen
   ============================================================================= */

.brd-review-container {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-lg);
}

.review-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  background: var(--color-white);
  padding: var(--spacing-lg);
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-md);
}

.review-header .header-left {
  display: flex;
  align-items: flex-start;
  gap: var(--spacing-md);
}

.review-header .success-icon {
  color: var(--color-success);
  flex-shrink: 0;
  margin-top: 4px;
}

.review-header h1 {
  font-size: var(--font-size-xl);
  color: var(--color-primary);
  margin-bottom: var(--spacing-xs);
}

.review-header p {
  color: var(--color-gray-500);
  font-size: var(--font-size-sm);
}

.header-actions {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
}

/* Save Status */
.save-status {
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
  padding: var(--spacing-xs) var(--spacing-sm);
  border-radius: var(--radius-md);
  font-size: var(--font-size-sm);
  font-weight: 500;
}

.save-status.saving {
  color: var(--color-info);
  background: var(--color-info-50);
}

.save-status.saved {
  color: var(--color-success);
  background: var(--color-success-50);
}

.save-status.error {
  color: var(--color-error);
  background: var(--color-error-50);
}

.save-status svg.spin {
  animation: spin 1s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

/* BRD Metadata */
.brd-metadata {
  display: flex;
  gap: var(--spacing-xl);
  background: var(--color-white);
  padding: var(--spacing-lg);
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-md);
}

.metadata-item {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
}

.metadata-item .label {
  font-size: var(--font-size-xs);
  color: var(--color-gray-500);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.metadata-item .value {
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-medium);
  color: var(--color-primary);
}

/* BRD Editor */
.brd-editor {
  background: var(--color-white);
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-md);
  overflow: hidden;
}

.editor-header {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  padding: var(--spacing-md) var(--spacing-lg);
  background: var(--color-primary);
  color: var(--color-white);
  font-weight: var(--font-weight-medium);
}

.editor-content {
  padding: var(--spacing-lg);
  max-height: 500px;
  overflow-y: auto;
}

.markdown-preview {
  font-family: var(--font-family);
  font-size: var(--font-size-sm);
  line-height: 1.8;
  white-space: pre-wrap;
  word-wrap: break-word;
  color: var(--color-dark);
  margin: 0;
}

/* Markdown Body - for ReactMarkdown rendered content */
.markdown-body {
  font-family: var(--font-family);
  font-size: var(--font-size-sm);
  line-height: 1.8;
  color: var(--color-dark);
}

.markdown-body h1 {
  font-size: var(--font-size-2xl);
  font-weight: var(--font-weight-bold);
  color: var(--color-primary);
  margin: var(--spacing-xl) 0 var(--spacing-md);
  padding-bottom: var(--spacing-sm);
  border-bottom: 2px solid var(--color-gray-200);
}

.markdown-body h2 {
  font-size: var(--font-size-xl);
  font-weight: var(--font-weight-bold);
  color: var(--color-primary);
  margin: var(--spacing-lg) 0 var(--spacing-sm);
  padding-bottom: var(--spacing-xs);
  border-bottom: 1px solid var(--color-gray-200);
}

.markdown-body h3 {
  font-size: var(--font-size-lg);
  font-weight: var(--font-weight-semibold);
  color: var(--color-primary);
  margin: var(--spacing-md) 0 var(--spacing-sm);
}

.markdown-body h4 {
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-semibold);
  color: var(--color-primary);
  margin: var(--spacing-md) 0 var(--spacing-xs);
}

.markdown-body p {
  margin: var(--spacing-sm) 0;
}

.markdown-body ul,
.markdown-body ol {
  margin: var(--spacing-sm) 0;
  padding-left: var(--spacing-xl);
}

.markdown-body li {
  margin: var(--spacing-xs) 0;
}

.markdown-body li > ul,
.markdown-body li > ol {
  margin: var(--spacing-xs) 0;
}

.markdown-body strong {
  font-weight: var(--font-weight-semibold);
  color: var(--color-primary);
}

.markdown-body em {
  font-style: italic;
}

.markdown-body code {
  font-family: 'SF Mono', 'Fira Code', monospace;
  font-size: 0.9em;
  background: var(--color-gray-100);
  padding: 2px 6px;
  border-radius: var(--radius-sm);
  color: var(--color-teal);
}

.markdown-body pre {
  background: var(--color-gray-50);
  border: 1px solid var(--color-gray-200);
  border-radius: var(--radius-md);
  padding: var(--spacing-md);
  overflow-x: auto;
  margin: var(--spacing-md) 0;
}

.markdown-body pre code {
  background: none;
  padding: 0;
  color: var(--color-dark);
}

.markdown-body blockquote {
  border-left: 4px solid var(--color-teal);
  margin: var(--spacing-md) 0;
  padding: var(--spacing-sm) var(--spacing-lg);
  background: var(--color-pale-cyan);
  color: var(--color-gray-600);
  font-style: italic;
}

.markdown-body table {
  width: 100%;
  border-collapse: collapse;
  margin: var(--spacing-md) 0;
}

.markdown-body th,
.markdown-body td {
  border: 1px solid var(--color-gray-200);
  padding: var(--spacing-sm) var(--spacing-md);
  text-align: left;
}

.markdown-body th {
  background: var(--color-gray-50);
  font-weight: var(--font-weight-semibold);
  color: var(--color-primary);
}

.markdown-body tr:nth-child(even) td {
  background: var(--color-gray-50);
}

.markdown-body hr {
  border: none;
  border-top: 1px solid var(--color-gray-200);
  margin: var(--spacing-xl) 0;
}

.markdown-body a {
  color: var(--color-teal);
  text-decoration: none;
}

.markdown-body a:hover {
  text-decoration: underline;
}

/* BRD Stats */
.brd-stats {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: var(--spacing-lg);
}

.brd-stats .stat-item {
  background: var(--color-white);
  padding: var(--spacing-lg);
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-md);
  text-align: center;
}

.brd-stats .stat-value {
  display: block;
  font-size: var(--font-size-3xl);
  font-weight: var(--font-weight-bold);
  color: var(--color-primary);
  margin-bottom: var(--spacing-xs);
}

.brd-stats .stat-label {
  font-size: var(--font-size-sm);
  color: var(--color-gray-500);
}

/* Buttons */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--spacing-sm);
  padding: var(--spacing-sm) var(--spacing-lg);
  font-family: var(--font-family);
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-semibold);
  border: none;
  border-radius: var(--radius-full);
  cursor: pointer;
  transition: all var(--transition-normal);
}

.btn-primary {
  background-color: var(--color-accent);
  color: var(--color-primary);
}

.btn-primary:hover:not(:disabled) {
  background-color: var(--color-gold);
  transform: translateY(-2px);
}

.btn-secondary {
  background-color: var(--color-primary);
  color: var(--color-white);
}

.btn-secondary:hover:not(:disabled) {
  background-color: var(--color-primary-light);
}

.btn-outline {
  background-color: transparent;
  color: var(--color-primary);
  border: 2px solid var(--color-primary);
}

.btn-outline:hover:not(:disabled) {
  background-color: var(--color-primary);
  color: var(--color-white);
}

.btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.spin {
  animation: spin 1s linear infinite;
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

/* =============================================================================
   Template Upload Styles
   ============================================================================= */

.template-upload-area {
  border: 2px dashed var(--color-gray-300);
  border-radius: var(--radius-lg);
  background: var(--color-gray-50);
  transition: all var(--transition-fast);
}

.template-upload-area:hover {
  border-color: var(--color-accent);
  background: var(--color-pale-cyan);
}

.upload-label {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: var(--spacing-xl);
  cursor: pointer;
}

.file-input {
  display: none;
}

.upload-icon {
  color: var(--color-gray-300);
  margin-bottom: var(--spacing-md);
}

.upload-text {
  color: var(--color-gray-500);
  font-size: var(--font-size-sm);
}

.browse-link {
  color: var(--color-accent);
  font-weight: var(--font-weight-semibold);
}

.upload-hint {
  color: var(--color-gray-300);
  font-size: var(--font-size-xs);
  margin-top: var(--spacing-xs);
}

.template-selected {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  padding: var(--spacing-md) var(--spacing-lg);
  background: var(--color-white);
  border-radius: var(--radius-lg);
}

.template-selected .file-icon {
  color: var(--color-teal);
}

.template-info {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.template-name {
  font-weight: var(--font-weight-medium);
  color: var(--color-primary);
}

.template-size {
  font-size: var(--font-size-xs);
  color: var(--color-gray-500);
}

.remove-template {
  padding: var(--spacing-xs);
  background: transparent;
  border: none;
  color: var(--color-gray-500);
  cursor: pointer;
  border-radius: var(--radius-full);
  transition: all var(--transition-fast);
}

.remove-template:hover {
  background: var(--color-error-light);
  color: var(--color-error);
}

/* =============================================================================
   Template Section Styles
   ============================================================================= */

.template-section {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
}

.template-selected.default-template {
  border: 2px solid var(--color-teal);
  background: linear-gradient(135deg, var(--color-pale-cyan), rgba(0, 128, 128, 0.05));
}

.template-selected.custom-template {
  border: 2px solid var(--color-accent);
  background: linear-gradient(135deg, rgba(255, 193, 7, 0.1), rgba(255, 193, 7, 0.05));
}

.default-badge {
  color: var(--color-teal);
  vertical-align: middle;
  margin-right: 4px;
}

.upload-custom-btn {
  display: inline-flex;
  align-items: center;
  gap: 0.25rem;
  padding: 0.375rem 0.75rem;
  background: #007380;
  border: none;
  border-radius: 6px;
  font-size: 0.75rem;
  font-weight: 600;
  color: #ffffff !important;
  cursor: pointer;
  transition: all 0.15s ease;
}

.upload-custom-btn:hover {
  background: #005f6b;
}

.upload-custom-btn .file-input {
  display: none;
}

.upload-custom-btn svg {
  color: #ffffff !important;
}

.use-default-btn {
  display: inline-flex;
  align-items: center;
  gap: var(--spacing-xs);
  padding: var(--spacing-xs) var(--spacing-md);
  background: var(--color-teal);
  color: var(--color-white);
  border: none;
  border-radius: var(--radius-md);
  font-size: var(--font-size-xs);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.use-default-btn:hover {
  background: var(--color-primary);
}

.download-template-btn {
  display: inline-flex;
  align-items: center;
  gap: var(--spacing-xs);
  padding: var(--spacing-xs) var(--spacing-md);
  background: var(--color-white);
  color: var(--color-teal);
  border: 1px solid var(--color-teal);
  border-radius: var(--radius-md);
  font-size: var(--font-size-xs);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.download-template-btn:hover {
  background: var(--color-teal);
  color: var(--color-white);
}

.download-template-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Template Preview */
.template-preview {
  border: 1px solid var(--color-gray-200);
  border-radius: var(--radius-md);
  overflow: hidden;
}

.template-preview summary {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  padding: var(--spacing-sm) var(--spacing-md);
  background: var(--color-gray-50);
  font-size: var(--font-size-sm);
  color: var(--color-gray-600);
  cursor: pointer;
  user-select: none;
}

.template-preview summary:hover {
  background: var(--color-gray-100);
}

.template-preview summary svg {
  color: var(--color-gray-400);
}

.template-preview[open] summary {
  border-bottom: 1px solid var(--color-gray-200);
}

.template-content {
  max-height: 300px;
  overflow-y: auto;
  padding: var(--spacing-md);
  margin: 0;
  font-family: 'SF Mono', 'Fira Code', monospace;
  font-size: var(--font-size-xs);
  line-height: 1.5;
  white-space: pre-wrap;
  word-wrap: break-word;
  color: var(--color-dark);
  background: var(--color-white);
}

/* =============================================================================
   Generation Progress / Thinking Process Styles
   ============================================================================= */

.generation-container {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xl);
  max-width: 900px;
  margin: 0 auto;
}

.generation-header {
  display: flex;
  align-items: flex-start;
  gap: var(--spacing-lg);
  background: var(--color-white);
  padding: var(--spacing-xl);
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-md);
}

.generation-header h1 {
  font-size: var(--font-size-xl);
  color: var(--color-primary);
  margin-bottom: var(--spacing-xs);
}

.generation-header p {
  color: var(--color-gray-500);
  font-size: var(--font-size-sm);
}

.brain-icon {
  color: var(--color-teal);
  flex-shrink: 0;
}

.brain-icon.pulse {
  animation: pulse 2s ease-in-out infinite;
}

@keyframes pulse {
  0%, 100% {
    opacity: 1;
    transform: scale(1);
  }
  50% {
    opacity: 0.7;
    transform: scale(1.05);
  }
}

/* Stop icon for cancelled state */
.stop-icon {
  color: var(--color-danger, #dc3545);
  flex-shrink: 0;
}

/* Generation actions container */
.generation-actions {
  margin-left: auto;
  display: flex;
  gap: var(--spacing-md);
}

/* Stop generation button */
.btn-stop {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  padding: var(--spacing-sm) var(--spacing-lg);
  background: var(--color-danger, #dc3545);
  color: white;
  border: none;
  border-radius: var(--radius-md);
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-semibold);
  cursor: pointer;
  transition: all var(--transition-fast);
  white-space: nowrap;
}

.btn-stop:hover {
  background: #c82333;
  transform: translateY(-1px);
  box-shadow: var(--shadow-md);
}

.btn-stop:active {
  transform: translateY(0);
}

.btn-danger {
  background: var(--color-danger, #dc3545);
  color: white;
}

.btn-danger:hover {
  background: #c82333;
}

/* =============================================================================
   Progress Stats Panel (Verified Mode)
   ============================================================================= */

.progress-stats-panel {
  background: var(--color-white);
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-md);
  overflow: hidden;
  border: 2px solid var(--color-teal);
}

.progress-stats-header {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  padding: var(--spacing-md) var(--spacing-lg);
  background: linear-gradient(135deg, var(--color-teal), #008080);
  color: white;
  font-weight: var(--font-weight-semibold);
  font-size: var(--font-size-sm);
}

.progress-stats-content {
  padding: var(--spacing-lg);
  display: flex;
  flex-direction: column;
  gap: var(--spacing-lg);
}

.progress-phase {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  padding: var(--spacing-sm) var(--spacing-md);
  background: var(--color-gray-50);
  border-radius: var(--radius-md);
}

.phase-label {
  color: var(--color-gray-500);
  font-size: var(--font-size-sm);
}

.phase-value {
  font-weight: var(--font-weight-semibold);
  font-size: var(--font-size-sm);
}

.phase-value.phase-initializing {
  color: var(--color-gray-600);
}

.phase-value.phase-gathering_context {
  color: var(--color-accent);
}

.phase-value.phase-generating {
  color: var(--color-teal);
}

.phase-value.phase-verifying {
  color: #6366f1;
}

.phase-value.phase-complete {
  color: var(--color-success);
}

.progress-item {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
}

.progress-item-header {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  font-size: var(--font-size-sm);
  color: var(--color-gray-600);
}

.progress-item-header svg {
  color: var(--color-teal);
}

.progress-count {
  margin-left: auto;
  font-weight: var(--font-weight-bold);
  color: var(--color-primary);
}

.progress-bar {
  height: 8px;
  background: var(--color-gray-200);
  border-radius: var(--radius-sm);
  overflow: hidden;
}

.progress-bar-fill {
  height: 100%;
  border-radius: var(--radius-sm);
  transition: width 0.3s ease;
}

.progress-bar-fill.sections {
  background: linear-gradient(90deg, var(--color-teal), #20b2aa);
}

.progress-bar-fill.claims {
  background: linear-gradient(90deg, #6366f1, #8b5cf6);
}

.current-item {
  font-size: var(--font-size-xs);
  color: var(--color-gray-500);
}

.current-item strong {
  color: var(--color-primary);
}

.verification-rate {
  font-size: var(--font-size-xs);
  color: var(--color-gray-500);
}

.verification-rate strong {
  color: #6366f1;
}

/* Thinking Step Categories */
.thinking-step.category-section {
  border-left: 3px solid var(--color-teal);
  padding-left: var(--spacing-sm);
  margin-left: calc(-1 * var(--spacing-sm) - 3px);
}

.thinking-step.category-verification {
  border-left: 3px solid #6366f1;
  padding-left: var(--spacing-sm);
  margin-left: calc(-1 * var(--spacing-sm) - 3px);
}

.thinking-step.category-context {
  border-left: 3px solid var(--color-accent);
  padding-left: var(--spacing-sm);
  margin-left: calc(-1 * var(--spacing-sm) - 3px);
}

.thinking-step.category-complete {
  border-left: 3px solid var(--color-success);
  padding-left: var(--spacing-sm);
  margin-left: calc(-1 * var(--spacing-sm) - 3px);
  background: rgba(16, 185, 129, 0.05);
}

.thinking-step.category-error {
  border-left: 3px solid var(--color-error);
  padding-left: var(--spacing-sm);
  margin-left: calc(-1 * var(--spacing-sm) - 3px);
  background: rgba(239, 68, 68, 0.05);
}

/* Thinking Section */
.thinking-section {
  background: var(--color-white);
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-md);
  overflow: hidden;
}

.thinking-header {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  padding: var(--spacing-md) var(--spacing-lg);
  background: linear-gradient(135deg, var(--color-teal), var(--color-primary));
  color: var(--color-white);
  font-weight: var(--font-weight-semibold);
  font-size: var(--font-size-sm);
}

.thinking-container {
  padding: var(--spacing-lg);
  max-height: 300px;
  overflow-y: auto;
  background: var(--color-gray-50);
}

.thinking-step {
  display: flex;
  align-items: flex-start;
  gap: var(--spacing-md);
  padding: var(--spacing-sm) 0;
  animation: fadeIn 0.3s ease-out;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.thinking-dot {
  width: 8px;
  height: 8px;
  background: var(--color-teal);
  border-radius: 50%;
  margin-top: 6px;
  flex-shrink: 0;
}

.thinking-step.active .thinking-dot {
  animation: blink 1s infinite;
}

@keyframes blink {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.3;
  }
}

.thinking-content {
  color: var(--color-dark);
  font-size: var(--font-size-sm);
  line-height: 1.5;
  font-family: var(--font-family);
}

/* Style for emoji icons in thinking content */
.thinking-content::first-letter {
  font-size: 1.1em;
}

.thinking-step.active {
  color: var(--color-gray-500);
}

/* Thinking step categories based on emoji */
.thinking-step[data-category="neo4j"] .thinking-dot {
  background: var(--color-accent);
}

.thinking-step[data-category="filesystem"] .thinking-dot {
  background: var(--color-teal);
}

.thinking-step[data-category="llm"] .thinking-dot {
  background: var(--color-primary);
}

/* Streaming Preview */
.streaming-preview {
  background: var(--color-white);
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-md);
  overflow: hidden;
}

.streaming-header {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  padding: var(--spacing-md) var(--spacing-lg);
  background: var(--color-primary);
  color: var(--color-white);
  font-weight: var(--font-weight-semibold);
  font-size: var(--font-size-sm);
}

.streaming-content {
  padding: var(--spacing-lg);
  max-height: 400px;
  overflow-y: auto;
  background: var(--color-gray-50);
}

.streaming-content pre {
  font-family: 'SF Mono', 'Fira Code', monospace;
  font-size: var(--font-size-xs);
  line-height: 1.6;
  white-space: pre-wrap;
  word-wrap: break-word;
  color: var(--color-dark);
  margin: 0;
}

/* =============================================================================
   Error Message Improvements
   ============================================================================= */

.error-message {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  padding: var(--spacing-md) var(--spacing-lg);
  background: var(--color-error-light);
  color: var(--color-error);
  border-radius: var(--radius-lg);
  margin-bottom: var(--spacing-lg);
}

.error-message span {
  flex: 1;
}

.dismiss-error {
  padding: var(--spacing-xs);
  background: transparent;
  border: none;
  color: var(--color-error);
  cursor: pointer;
  border-radius: var(--radius-full);
  opacity: 0.7;
  transition: opacity var(--transition-fast);
}

.dismiss-error:hover {
  opacity: 1;
}

/* =============================================================================
   Download Dropdown
   ============================================================================= */

.download-dropdown {
  display: flex;
  gap: var(--spacing-sm);
}

/* =============================================================================
   Responsive
   ============================================================================= */

@media (max-width: 1024px) {
  .brd-form-container {
    grid-template-columns: 1fr;
  }
}

@media (max-width: 768px) {
  .review-header {
    flex-direction: column;
    gap: var(--spacing-lg);
  }

  .header-actions {
    flex-wrap: wrap;
    width: 100%;
  }

  .header-actions .btn {
    flex: 1;
    min-width: 120px;
  }

  .brd-metadata {
    flex-wrap: wrap;
  }

  .brd-stats {
    grid-template-columns: repeat(2, 1fr);
  }
}

/* =============================================================================
   Mode Toggle Styles
   ============================================================================= */

.mode-toggle-container {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: var(--spacing-md);
}

.mode-toggle-btn {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  padding: var(--spacing-lg);
  background: var(--color-white);
  border: 2px solid var(--color-gray-300);
  border-radius: var(--radius-lg);
  cursor: pointer;
  transition: all var(--transition-fast);
  text-align: left;
}

.mode-toggle-btn:hover {
  border-color: var(--color-accent);
  background: var(--color-pale-cyan);
}

.mode-toggle-btn.active {
  border-color: var(--color-teal);
  background: linear-gradient(135deg, var(--color-pale-cyan), rgba(0, 128, 128, 0.1));
}

.mode-toggle-btn svg {
  color: var(--color-gray-500);
  flex-shrink: 0;
}

.mode-toggle-btn.active svg {
  color: var(--color-teal);
}

.mode-info {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.mode-title {
  font-weight: var(--font-weight-semibold);
  color: var(--color-primary);
}

.mode-desc {
  font-size: var(--font-size-xs);
  color: var(--color-gray-500);
}

/* =============================================================================
   Model Selector Styles
   ============================================================================= */

.model-selector {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
}

.model-loading {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  padding: var(--spacing-md);
  color: var(--color-gray-500);
  font-size: var(--font-size-sm);
}

.model-select {
  width: 100%;
  padding: var(--spacing-md) var(--spacing-lg);
  font-size: var(--font-size-base);
  border: 2px solid var(--color-gray-300);
  border-radius: var(--radius-lg);
  background: var(--color-white);
  cursor: pointer;
  transition: all var(--transition-fast);
  appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%23666' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right var(--spacing-md) center;
  background-size: 20px;
  padding-right: calc(var(--spacing-xl) + 20px);
}

.model-select:hover {
  border-color: var(--color-accent);
}

.model-select:focus {
  outline: none;
  border-color: var(--color-teal);
  box-shadow: 0 0 0 3px rgba(0, 128, 128, 0.15);
}

.model-info-panel {
  padding: var(--spacing-md);
  background: var(--color-gray-50);
  border-radius: var(--radius-lg);
  border: 1px solid var(--color-gray-200);
}

.model-provider {
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-semibold);
  color: var(--color-accent);
  text-transform: uppercase;
  letter-spacing: 0.05em;
  margin-bottom: var(--spacing-xs);
}

.model-description {
  font-size: var(--font-size-sm);
  color: var(--color-gray-700);
  margin-bottom: var(--spacing-sm);
}

.model-strengths {
  display: flex;
  flex-wrap: wrap;
  gap: var(--spacing-xs);
}

.strength-tag {
  font-size: var(--font-size-xs);
  padding: 2px 8px;
  background: var(--color-pale-cyan);
  color: var(--color-teal);
  border-radius: var(--radius-full);
  white-space: nowrap;
}

/* =============================================================================
   Advanced Options Styles
   ============================================================================= */

.advanced-options-section {
  margin-bottom: var(--spacing-xl);
  border: 1px solid var(--color-gray-200);
  border-radius: var(--radius-lg);
  overflow: hidden;
}

.advanced-options-toggle {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  width: 100%;
  padding: var(--spacing-md) var(--spacing-lg);
  background: var(--color-gray-50);
  border: none;
  cursor: pointer;
  font-weight: var(--font-weight-medium);
  color: var(--color-primary);
  transition: background-color var(--transition-fast);
}

.advanced-options-toggle:hover {
  background: var(--color-gray-100);
}

.advanced-options-toggle svg {
  color: var(--color-gray-500);
}

.advanced-options-content {
  padding: var(--spacing-lg);
  background: var(--color-white);
  display: flex;
  flex-direction: column;
  gap: var(--spacing-lg);
}

.option-group {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
}

.option-group label {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  color: var(--color-primary);
}

.option-group label svg {
  color: var(--color-gray-400);
}

.option-select {
  padding: var(--spacing-sm) var(--spacing-md);
  border: 1px solid var(--color-gray-300);
  border-radius: var(--radius-md);
  font-size: var(--font-size-sm);
  background: var(--color-white);
}

.option-select:focus {
  outline: none;
  border-color: var(--color-teal);
}

.option-range {
  width: 100%;
  accent-color: var(--color-teal);
}

.option-hint {
  font-size: var(--font-size-xs);
  color: var(--color-gray-500);
}

.value-display {
  margin-left: auto;
  font-weight: var(--font-weight-semibold);
  color: var(--color-teal);
}

.checkbox-group label {
  cursor: pointer;
}

.checkbox-group input[type="checkbox"] {
  width: 16px;
  height: 16px;
  accent-color: var(--color-teal);
}

.verified-options {
  margin-top: var(--spacing-md);
  padding-top: var(--spacing-lg);
  border-top: 1px solid var(--color-gray-200);
}

/* Consistency Options (Temperature & Seed) */
.consistency-options {
  margin-top: var(--spacing-md);
  padding-top: var(--spacing-lg);
  border-top: 1px solid var(--color-gray-200);
}

.consistency-options h4 {
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-semibold);
  color: var(--color-primary);
  margin-bottom: var(--spacing-md);
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
}

.consistency-options h4 svg {
  color: var(--color-gray-500);
}

.option-input {
  width: 100%;
  padding: var(--spacing-sm) var(--spacing-md);
  border: 1px solid var(--color-gray-300);
  border-radius: var(--radius-md);
  font-size: var(--font-size-sm);
  font-family: 'SF Mono', 'Fira Code', monospace;
  background: var(--color-white);
  transition: border-color var(--transition-fast);
}

.option-input:focus {
  outline: none;
  border-color: var(--color-teal);
}

.option-input::placeholder {
  color: var(--color-gray-300);
  font-family: var(--font-family);
}

.verified-options h4 {
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-semibold);
  color: var(--color-teal);
  margin-bottom: var(--spacing-md);
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
}

/* Verified mode button */
.btn-primary.verified-mode {
  background: linear-gradient(135deg, var(--color-teal), var(--color-primary));
  color: var(--color-white);
}

.btn-primary.verified-mode:hover:not(:disabled) {
  background: linear-gradient(135deg, var(--color-primary), var(--color-teal));
}

/* =============================================================================
   Section Length Configuration
   ============================================================================= */

.section-config-container {
  margin-top: var(--spacing-lg);
  border-top: 1px solid var(--color-gray-200);
  padding-top: var(--spacing-lg);
}

.section-config-toggle {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  width: 100%;
  padding: var(--spacing-md);
  background: var(--color-gray-50);
  border: 1px solid var(--color-gray-200);
  border-radius: var(--radius-lg);
  cursor: pointer;
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  color: var(--color-primary);
  transition: all 0.2s ease;
}

.section-config-toggle:hover {
  background: var(--color-gray-100);
  border-color: var(--color-gray-300);
}

.section-config-toggle svg:first-child {
  color: var(--color-accent);
}

.section-config-toggle .section-count {
  margin-left: auto;
  margin-right: var(--spacing-sm);
  font-size: var(--font-size-xs);
  color: var(--color-gray-500);
  background: var(--color-white);
  padding: 2px 8px;
  border-radius: var(--radius-full);
}

.section-config-content {
  margin-top: var(--spacing-md);
  padding: var(--spacing-md);
  background: var(--color-white);
  border: 1px solid var(--color-gray-200);
  border-radius: var(--radius-lg);
}

.section-config-hint {
  font-size: var(--font-size-xs);
  color: var(--color-gray-500);
  margin-bottom: var(--spacing-md);
}

.section-parsing-loading {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--spacing-sm);
  padding: var(--spacing-xl);
  color: var(--color-gray-500);
  font-size: var(--font-size-sm);
}

.section-parsing-loading svg {
  color: var(--color-accent);
}

.section-config-list {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-sm);
}

.section-config-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--spacing-md);
  background: var(--color-gray-50);
  border-radius: var(--radius-md);
  gap: var(--spacing-lg);
  flex-wrap: wrap;
}

.section-name-col {
  display: flex;
  flex-direction: column;
  gap: 2px;
  flex: 1;
  min-width: 150px;
}

.section-name-col .section-name {
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-semibold);
  color: var(--color-dark);
}

.section-name-col .section-description {
  font-size: var(--font-size-xs);
  color: var(--color-gray-500);
}

.section-controls {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  flex-wrap: wrap;
}

.section-presets {
  display: flex;
  gap: 4px;
  background: var(--color-white);
  padding: 3px;
  border-radius: var(--radius-md);
  border: 1px solid var(--color-gray-200);
}

.preset-btn {
  padding: 4px 10px;
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-medium);
  border: none;
  border-radius: var(--radius-sm);
  background: transparent;
  color: var(--color-gray-600);
  cursor: pointer;
  transition: all var(--transition-fast);
  white-space: nowrap;
}

.preset-btn:hover {
  background: var(--color-gray-100);
  color: var(--color-dark);
}

.preset-btn.active {
  background: var(--color-teal);
  color: var(--color-white);
}

.section-words-input {
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
}

.section-words-input input {
  width: 70px;
  padding: var(--spacing-xs) var(--spacing-sm);
  border: 1px solid var(--color-gray-300);
  border-radius: var(--radius-md);
  font-size: var(--font-size-sm);
  text-align: center;
}

.section-words-input input:focus {
  outline: none;
  border-color: var(--color-accent);
  box-shadow: 0 0 0 2px rgba(0, 180, 180, 0.1);
}

.section-words-input .words-label {
  font-size: var(--font-size-xs);
  color: var(--color-gray-500);
}

/* Legacy - can be removed */
.section-config-actions {
  display: none;
  padding: var(--spacing-xs) var(--spacing-sm);
}

/* =============================================================================
   Mode Badge Styles
   ============================================================================= */

.mode-badge {
  display: inline-flex;
  align-items: center;
  gap: var(--spacing-xs);
  padding: var(--spacing-xs) var(--spacing-md);
  border-radius: var(--radius-full);
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-semibold);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.mode-badge.draft {
  background: var(--color-warning-light);
  color: var(--color-warning);
}

.mode-badge.verified {
  background: rgba(0, 128, 128, 0.15);
  color: var(--color-teal);
}

.value.mode-draft {
  color: var(--color-warning);
}

.value.mode-verified {
  color: var(--color-teal);
}

/* =============================================================================
   Verification Report Styles
   ============================================================================= */

.verification-report-section {
  background: var(--color-white);
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-md);
  overflow: hidden;
}

.verification-report-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--spacing-lg);
  background: linear-gradient(135deg, var(--color-teal), var(--color-primary));
  color: var(--color-white);
  cursor: pointer;
  transition: opacity var(--transition-fast);
}

.verification-report-header:hover {
  opacity: 0.95;
}

.verification-report-header .header-left {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
}

.verification-report-header .header-right {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
}

.verification-summary {
  font-size: var(--font-size-sm);
  opacity: 0.9;
}

.overall-status {
  padding: var(--spacing-xs) var(--spacing-sm);
  border-radius: var(--radius-md);
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-semibold);
  text-transform: capitalize;
}

.overall-status.status-verified {
  background: rgba(255, 255, 255, 0.2);
}

.overall-status.status-partially_verified {
  background: rgba(255, 193, 7, 0.3);
}

.overall-status.status-unverified {
  background: rgba(244, 67, 54, 0.3);
}

.verification-report-content {
  padding: var(--spacing-lg);
}

/* Summary Grid */
.verification-summary-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: var(--spacing-md);
  margin-bottom: var(--spacing-xl);
}

.summary-card {
  background: var(--color-gray-50);
  padding: var(--spacing-md);
  border-radius: var(--radius-lg);
  display: flex;
  flex-direction: column;
  gap: var(--spacing-sm);
}

.summary-label {
  font-size: var(--font-size-xs);
  color: var(--color-gray-500);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.summary-value {
  font-size: var(--font-size-lg);
  font-weight: var(--font-weight-semibold);
  color: var(--color-primary);
}

/* Confidence Bar */
.confidence-bar-container {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  background: var(--color-gray-200);
  border-radius: var(--radius-full);
  height: 24px;
  padding: 4px;
  position: relative;
}

.confidence-bar {
  height: 100%;
  border-radius: var(--radius-full);
  transition: width var(--transition-normal);
}

.confidence-bar.high {
  background: linear-gradient(90deg, var(--color-success), #4caf50);
}

.confidence-bar.medium {
  background: linear-gradient(90deg, #ffc107, #ff9800);
}

.confidence-bar.low {
  background: linear-gradient(90deg, #f44336, #ff5722);
}

.confidence-text {
  position: absolute;
  right: var(--spacing-sm);
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-semibold);
  color: var(--color-primary);
}

/* Risk Badge */
.risk-badge {
  display: inline-flex;
  align-items: center;
  gap: var(--spacing-xs);
  padding: var(--spacing-xs) var(--spacing-md);
  border-radius: var(--radius-full);
  font-weight: var(--font-weight-semibold);
  text-transform: capitalize;
}

.risk-badge.risk-low {
  background: rgba(76, 175, 80, 0.15);
  color: var(--color-success);
}

.risk-badge.risk-medium {
  background: rgba(255, 193, 7, 0.15);
  color: #f57c00;
}

.risk-badge.risk-high {
  background: rgba(244, 67, 54, 0.15);
  color: var(--color-error);
}

/* Claims Statistics */
.claims-statistics {
  margin-bottom: var(--spacing-xl);
}

.claims-statistics h4 {
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-semibold);
  color: var(--color-primary);
  margin-bottom: var(--spacing-md);
}

.claims-stats-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: var(--spacing-md);
}

.claim-stat {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--spacing-xs);
  padding: var(--spacing-md);
  border-radius: var(--radius-lg);
  background: var(--color-gray-50);
}

.claim-stat .count {
  font-size: var(--font-size-2xl);
  font-weight: var(--font-weight-bold);
}

.claim-stat .label {
  font-size: var(--font-size-xs);
  color: var(--color-gray-500);
}

.claim-stat.verified {
  border-left: 3px solid var(--color-success);
}

.claim-stat.verified svg,
.claim-stat.verified .count {
  color: var(--color-success);
}

.claim-stat.partial {
  border-left: 3px solid #ffc107;
}

.claim-stat.partial svg,
.claim-stat.partial .count {
  color: #f57c00;
}

.claim-stat.unverified {
  border-left: 3px solid var(--color-warning);
}

.claim-stat.unverified svg,
.claim-stat.unverified .count {
  color: var(--color-warning);
}

.claim-stat.contradicted {
  border-left: 3px solid var(--color-error);
}

.claim-stat.contradicted svg,
.claim-stat.contradicted .count {
  color: var(--color-error);
}

/* Sections Breakdown */
.sections-breakdown h4 {
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-semibold);
  color: var(--color-primary);
  margin-bottom: var(--spacing-md);
}

.section-report {
  border: 1px solid var(--color-gray-200);
  border-radius: var(--radius-lg);
  margin-bottom: var(--spacing-md);
  overflow: hidden;
}

.section-header {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  padding: var(--spacing-md) var(--spacing-lg);
  background: var(--color-gray-50);
}

.section-name {
  font-weight: var(--font-weight-semibold);
  color: var(--color-primary);
  flex: 1;
}

.section-stats {
  font-size: var(--font-size-xs);
  color: var(--color-gray-500);
}

.section-confidence {
  padding: var(--spacing-sm) var(--spacing-lg);
  background: var(--color-white);
}

/* Status Badge */
.status-badge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 2px var(--spacing-sm);
  border-radius: var(--radius-md);
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-medium);
  text-transform: capitalize;
}

.status-badge.status-verified {
  background: rgba(76, 175, 80, 0.15);
  color: var(--color-success);
}

.status-badge.status-partial {
  background: rgba(255, 193, 7, 0.15);
  color: #f57c00;
}

.status-badge.status-unverified {
  background: rgba(255, 152, 0, 0.15);
  color: var(--color-warning);
}

.status-badge.status-contradicted {
  background: rgba(244, 67, 54, 0.15);
  color: var(--color-error);
}

/* Section Claims */
.section-claims {
  padding: var(--spacing-md) var(--spacing-lg);
  background: var(--color-white);
  border-top: 1px solid var(--color-gray-200);
}

.claim-item {
  padding: var(--spacing-md);
  border-radius: var(--radius-md);
  margin-bottom: var(--spacing-sm);
  background: var(--color-gray-50);
  border-left: 3px solid var(--color-gray-300);
}

.claim-item.verified {
  border-left-color: var(--color-success);
}

.claim-item.partially_verified {
  border-left-color: #ffc107;
}

.claim-item.unverified {
  border-left-color: var(--color-warning);
}

.claim-item.contradicted {
  border-left-color: var(--color-error);
}

.claim-header {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  margin-bottom: var(--spacing-xs);
}

.claim-confidence {
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-semibold);
  color: var(--color-gray-500);
}

.sme-badge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 2px var(--spacing-sm);
  background: rgba(156, 39, 176, 0.15);
  color: #7b1fa2;
  border-radius: var(--radius-md);
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-medium);
}

.claim-text {
  font-size: var(--font-size-sm);
  color: var(--color-dark);
  margin: var(--spacing-xs) 0;
  line-height: 1.5;
}

.claim-meta {
  display: flex;
  gap: var(--spacing-md);
  font-size: var(--font-size-xs);
  color: var(--color-gray-500);
}

/* Verification Summary */
.verification-summary {
  font-size: var(--font-size-xs);
  color: var(--color-gray-600);
  font-style: italic;
  margin: var(--spacing-xs) 0;
  padding: var(--spacing-xs) var(--spacing-sm);
  background: var(--color-gray-50);
  border-radius: var(--radius-md);
}

/* =============================================================================
   Code Evidence Panel - Shows code that supports claims
   ============================================================================= */

.code-evidence-panel {
  margin: var(--spacing-sm) 0;
  background: var(--color-gray-50);
  border-radius: var(--radius-lg);
  border: 1px solid var(--color-gray-200);
  overflow: hidden;
}

.code-evidence-header {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  padding: var(--spacing-sm) var(--spacing-md);
  background: var(--color-white);
  border-bottom: 1px solid var(--color-gray-200);
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-semibold);
  color: var(--color-primary);
}

.code-evidence-header svg {
  color: var(--color-accent);
}

.code-evidence-list {
  padding: var(--spacing-sm);
}

.code-evidence-item {
  background: var(--color-white);
  border-radius: var(--radius-md);
  border: 1px solid var(--color-gray-200);
  margin-bottom: var(--spacing-sm);
  overflow: hidden;
}

.code-evidence-item:last-child {
  margin-bottom: 0;
}

.code-evidence-location {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--spacing-sm) var(--spacing-md);
  background: var(--color-gray-50);
  border-bottom: 1px solid var(--color-gray-100);
}

.code-evidence-location:hover {
  background: var(--color-gray-100);
}

.location-info {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  font-family: var(--font-mono);
  font-size: var(--font-size-xs);
}

.location-info .file-name {
  color: var(--color-accent);
  font-weight: var(--font-weight-semibold);
}

.location-info .line-range {
  color: var(--color-gray-500);
}

.location-info .entity-badge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 2px 8px;
  background: var(--color-primary-light);
  border-radius: var(--radius-full);
  font-size: 10px;
  color: var(--color-primary);
}

.location-info .entity-type {
  color: var(--color-gray-500);
}

.expand-btn {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 4px 8px;
  background: var(--color-white);
  border: 1px solid var(--color-gray-300);
  border-radius: var(--radius-md);
  font-size: var(--font-size-xs);
  color: var(--color-primary);
  cursor: pointer;
  transition: all 0.2s;
}

.expand-btn:hover {
  background: var(--color-primary);
  color: var(--color-white);
  border-color: var(--color-primary);
}

.code-evidence-item .code-explanation {
  display: flex;
  align-items: flex-start;
  gap: var(--spacing-sm);
  padding: var(--spacing-sm) var(--spacing-md);
  background: rgba(0, 180, 120, 0.05);
  border-left: 3px solid var(--color-success);
  font-size: var(--font-size-xs);
  color: var(--color-gray-700);
  line-height: 1.5;
}

.code-evidence-item .code-explanation svg {
  color: var(--color-success);
  flex-shrink: 0;
  margin-top: 2px;
}

.code-snippet-container {
  border-top: 1px solid var(--color-gray-200);
}

.snippet-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--spacing-xs) var(--spacing-md);
  background: var(--color-gray-800);
  font-family: var(--font-mono);
  font-size: 10px;
}

.snippet-header .snippet-path {
  color: var(--color-gray-400);
}

.snippet-header .snippet-lines {
  color: var(--color-accent);
}

.code-snippet-full {
  margin: 0;
  padding: var(--spacing-md);
  background: var(--color-gray-900);
  overflow-x: auto;
  max-height: 400px;
}

.code-snippet-full code {
  font-family: var(--font-mono);
  font-size: 12px;
  line-height: 1.6;
  color: var(--color-gray-100);
  white-space: pre;
}

.code-snippet-preview {
  margin: 0;
  padding: var(--spacing-sm) var(--spacing-md);
  background: var(--color-gray-100);
  border-top: 1px solid var(--color-gray-200);
  overflow-x: auto;
  max-height: 80px;
}

.code-snippet-preview code {
  font-family: var(--font-mono);
  font-size: 11px;
  line-height: 1.5;
  color: var(--color-gray-600);
  white-space: pre;
}

.show-more-refs {
  width: 100%;
  padding: var(--spacing-sm);
  background: var(--color-white);
  border: none;
  border-top: 1px solid var(--color-gray-200);
  font-size: var(--font-size-xs);
  color: var(--color-accent);
  cursor: pointer;
  transition: background 0.2s;
}

.show-more-refs:hover {
  background: var(--color-gray-50);
}

/* Draft Warning */
.draft-warning {
  display: flex;
  align-items: flex-start;
  gap: var(--spacing-md);
  padding: var(--spacing-lg);
  background: var(--color-warning-light);
  border-radius: var(--radius-xl);
  border-left: 4px solid var(--color-warning);
}

.draft-warning svg {
  color: var(--color-warning);
  flex-shrink: 0;
  margin-top: 2px;
}

.draft-warning strong {
  display: block;
  color: var(--color-primary);
  margin-bottom: var(--spacing-xs);
}

.draft-warning p {
  font-size: var(--font-size-sm);
  color: var(--color-gray-600);
  margin: 0;
}

/* Responsive for verification report */
@media (max-width: 1024px) {
  .verification-summary-grid {
    grid-template-columns: repeat(2, 1fr);
  }

  .claims-stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (max-width: 768px) {
  .mode-toggle-container {
    grid-template-columns: 1fr;
  }

  .verification-summary-grid {
    grid-template-columns: 1fr;
  }

  .claims-stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }

  .verification-report-header {
    flex-direction: column;
    gap: var(--spacing-sm);
    text-align: center;
  }

  .verification-report-header .header-left,
  .verification-report-header .header-right {
    justify-content: center;
  }
}

/* =============================================================================
   BRD Refinement Styles
   ============================================================================= */

/* Global Feedback Panel */
.global-feedback-panel {
  background: var(--color-white);
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-md);
  overflow: hidden;
  margin-bottom: var(--spacing-lg);
}

.global-feedback-header {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  padding: var(--spacing-md) var(--spacing-lg);
  background: linear-gradient(135deg, var(--color-primary), var(--color-accent));
  color: var(--color-white);
  font-weight: var(--font-weight-semibold);
}

.global-feedback-header .refinement-badge {
  margin-left: auto;
  background: rgba(255, 255, 255, 0.2);
  padding: var(--spacing-xs) var(--spacing-sm);
  border-radius: var(--radius-full);
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-medium);
}

.global-feedback-content {
  padding: var(--spacing-lg);
}

.global-feedback-content textarea {
  width: 100%;
  padding: var(--spacing-md);
  border: 1px solid var(--color-gray-300);
  border-radius: var(--radius-lg);
  font-family: inherit;
  font-size: var(--font-size-sm);
  resize: vertical;
  transition: border-color var(--transition-fast), box-shadow var(--transition-fast);
}

.global-feedback-content textarea:focus {
  outline: none;
  border-color: var(--color-accent);
  box-shadow: 0 0 0 3px rgba(0, 180, 180, 0.1);
}

.global-feedback-content textarea:disabled {
  background: var(--color-gray-100);
  cursor: not-allowed;
}

.global-feedback-actions {
  display: flex;
  justify-content: flex-end;
  gap: var(--spacing-md);
  margin-top: var(--spacing-md);
}

/* Section-based BRD Editor */
.editor-content-sections {
  padding: var(--spacing-lg);
}

.brd-section {
  margin-bottom: var(--spacing-xl);
  padding-bottom: var(--spacing-lg);
  border-bottom: 1px solid var(--color-gray-200);
}

.brd-section:last-child {
  margin-bottom: 0;
  padding-bottom: 0;
  border-bottom: none;
}

.section-header-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: var(--spacing-md);
}

.section-header-row h2 {
  margin: 0;
  font-size: var(--font-size-xl);
  font-weight: var(--font-weight-semibold);
  color: var(--color-gray-800);
}

.section-feedback-btn {
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
  padding: var(--spacing-xs) var(--spacing-sm);
  background: transparent;
  border: 1px solid var(--color-gray-300);
  border-radius: var(--radius-md);
  font-size: var(--font-size-xs);
  color: var(--color-gray-600);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.section-feedback-btn:hover {
  border-color: var(--color-accent);
  color: var(--color-accent);
  background: rgba(0, 180, 180, 0.05);
}

.section-feedback-btn.active {
  border-color: var(--color-accent);
  color: var(--color-white);
  background: var(--color-accent);
}

/* Section Feedback Panel */
.section-feedback-panel {
  background: var(--color-gray-50);
  border-radius: var(--radius-lg);
  padding: var(--spacing-md);
  margin-bottom: var(--spacing-md);
  border: 1px solid var(--color-gray-200);
}

.section-feedback-panel textarea {
  width: 100%;
  padding: var(--spacing-sm);
  border: 1px solid var(--color-gray-300);
  border-radius: var(--radius-md);
  font-family: inherit;
  font-size: var(--font-size-sm);
  resize: vertical;
  transition: border-color var(--transition-fast);
}

.section-feedback-panel textarea:focus {
  outline: none;
  border-color: var(--color-accent);
}

.section-feedback-actions {
  display: flex;
  justify-content: flex-end;
  gap: var(--spacing-sm);
  margin-top: var(--spacing-sm);
}

.btn-sm {
  padding: var(--spacing-xs) var(--spacing-sm);
  font-size: var(--font-size-xs);
}

.section-content {
  font-size: var(--font-size-sm);
  line-height: 1.7;
  color: var(--color-gray-700);
}

/* Version Badge */
.version-badge {
  background: var(--color-gray-100);
  padding: var(--spacing-xs) var(--spacing-sm);
  border-radius: var(--radius-md);
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-medium);
  color: var(--color-gray-600);
}

.editor-actions {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  margin-left: auto;
}

/* History Sidebar */
.history-sidebar {
  position: fixed;
  top: 0;
  right: 0;
  width: 400px;
  height: 100vh;
  background: var(--color-white);
  box-shadow: -4px 0 20px rgba(0, 0, 0, 0.15);
  z-index: 1000;
  display: flex;
  flex-direction: column;
  animation: slideIn 0.3s ease;
}

@keyframes slideIn {
  from {
    transform: translateX(100%);
  }
  to {
    transform: translateX(0);
  }
}

.history-header {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  padding: var(--spacing-lg);
  background: var(--color-gray-50);
  border-bottom: 1px solid var(--color-gray-200);
  font-weight: var(--font-weight-semibold);
}

.history-header .close-btn {
  margin-left: auto;
  background: none;
  border: none;
  color: var(--color-gray-500);
  cursor: pointer;
  padding: var(--spacing-xs);
  border-radius: var(--radius-md);
  transition: all var(--transition-fast);
}

.history-header .close-btn:hover {
  background: var(--color-gray-200);
  color: var(--color-gray-700);
}

.history-content {
  flex: 1;
  overflow-y: auto;
  padding: var(--spacing-lg);
}

.history-empty {
  text-align: center;
  color: var(--color-gray-500);
  padding: var(--spacing-xl);
}

.history-empty .hint {
  font-size: var(--font-size-xs);
  margin-top: var(--spacing-sm);
}

.history-timeline {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
}

.history-entry {
  display: flex;
  gap: var(--spacing-md);
  padding: var(--spacing-md);
  background: var(--color-gray-50);
  border-radius: var(--radius-lg);
  border-left: 3px solid var(--color-gray-300);
}

.history-entry.created {
  border-left-color: var(--color-success);
}

.history-entry.refined {
  border-left-color: var(--color-accent);
}

.entry-version {
  font-weight: var(--font-weight-bold);
  color: var(--color-gray-400);
  min-width: 40px;
}

.entry-details {
  flex: 1;
}

.entry-action {
  font-weight: var(--font-weight-semibold);
  color: var(--color-gray-800);
  margin-bottom: var(--spacing-xs);
}

.entry-target {
  color: var(--color-accent);
}

.entry-feedback {
  font-size: var(--font-size-xs);
  color: var(--color-gray-600);
  font-style: italic;
  margin-bottom: var(--spacing-xs);
}

.entry-summary {
  font-size: var(--font-size-xs);
  color: var(--color-gray-700);
  margin-bottom: var(--spacing-xs);
}

.entry-time {
  font-size: var(--font-size-xs);
  color: var(--color-gray-400);
}

/* Refinement Error */
.refinement-error {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  padding: var(--spacing-md);
  background: var(--color-danger-light);
  border: 1px solid var(--color-danger);
  border-radius: var(--radius-lg);
  color: var(--color-danger);
  margin-top: var(--spacing-lg);
}

.refinement-error button {
  margin-left: auto;
  background: none;
  border: none;
  color: inherit;
  cursor: pointer;
  padding: var(--spacing-xs);
  border-radius: var(--radius-md);
}

.refinement-error button:hover {
  background: rgba(0, 0, 0, 0.1);
}

/* Responsive for refinement */
@media (max-width: 768px) {
  .history-sidebar {
    width: 100%;
  }

  .global-feedback-actions {
    flex-direction: column;
  }

  .section-header-row {
    flex-direction: column;
    align-items: flex-start;
    gap: var(--spacing-sm);
  }

  .section-feedback-btn {
    align-self: flex-start;
  }
}

/* =============================================================================
   Library View Styles
   ============================================================================= */

.generate-brd-page.library-view {
  max-width: 1400px;
}

/* Library Header */
.library-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: var(--spacing-xl);
}

.library-header .header-left {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
}

.library-header .header-left svg {
  color: var(--color-primary);
}

.library-header .header-left h1 {
  margin: 0;
  font-size: var(--font-size-2xl);
  font-weight: 600;
}

.library-header .header-left p {
  margin: 0;
  color: var(--color-gray-500);
  font-size: var(--font-size-sm);
}

.header-actions {
  display: flex;
  gap: var(--spacing-sm);
}

/* Page Header with Back Button */
.page-header.with-back {
  position: relative;
}

.back-to-library {
  display: inline-flex;
  align-items: center;
  gap: var(--spacing-xs);
  margin-bottom: var(--spacing-md);
  color: var(--color-gray-600);
  font-size: var(--font-size-sm);
}

.back-to-library:hover {
  color: var(--color-primary);
}

/* Library Toolbar - matches EPIC screen */
.library-toolbar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: var(--spacing-lg);
  margin-bottom: var(--spacing-lg);
  flex-wrap: wrap;
  background: var(--bg-secondary, #f8fafc);
  padding: var(--spacing-md);
  border-radius: var(--radius-lg);
}

.toolbar-left {
  display: flex;
  align-items: center;
  gap: var(--spacing-lg);
  flex-wrap: wrap;
}

.toolbar-right {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
}

/* Filter Tabs */
.filter-tabs {
  display: flex;
  gap: var(--spacing-sm);
  background: var(--color-white, #ffffff);
  padding: 4px;
  border-radius: var(--radius-md);
  border: 1px solid var(--color-gray-200);
}

.filter-btn {
  display: inline-flex;
  align-items: center;
  gap: 0.375rem;
  padding: 0.5rem 1rem;
  border: none;
  background: transparent;
  color: var(--color-gray-600);
  font-size: var(--font-size-sm);
  font-weight: 500;
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: all 0.2s;
  white-space: nowrap;
}

.filter-btn:hover {
  background: var(--color-gray-100);
  color: var(--color-gray-900);
}

.filter-btn.active {
  background: var(--color-primary, #003D5B);
  color: white;
}

.filter-btn.completed.active {
  background: rgba(16, 185, 129, 0.1);
  color: var(--color-success, #10b981);
}

.filter-btn svg {
  flex-shrink: 0;
}

/* Search Input - inline style */
.search-input {
  padding: 0.5rem 1rem;
  background: var(--color-white, #ffffff);
  border: 1px solid var(--color-gray-200);
  border-radius: var(--radius-md);
  font-size: var(--font-size-sm);
  min-width: 200px;
  outline: none;
  transition: border-color 0.2s, box-shadow 0.2s;
}

.search-input:focus {
  border-color: var(--color-primary, #003D5B);
  box-shadow: 0 0 0 3px rgba(0, 61, 91, 0.1);
}

.search-input::placeholder {
  color: var(--color-gray-400);
}

/* Refresh Button */
.refresh-btn {
  display: inline-flex;
  align-items: center;
  gap: 0.375rem;
}

.refresh-btn .spinning {
  animation: spin 1s linear infinite;
}

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

.filter-select {
  padding: var(--spacing-sm) var(--spacing-md);
  background: var(--color-gray-50);
  border: 1px solid var(--color-gray-200);
  border-radius: var(--radius-md);
  font-size: var(--font-size-sm);
  color: var(--color-gray-700);
  cursor: pointer;
  min-width: 150px;
}

/* States */
.loading-state,
.empty-state,
.error-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: var(--spacing-3xl);
  text-align: center;
  color: var(--color-gray-500);
}

.loading-state svg,
.empty-state svg,
.error-state svg {
  color: var(--color-gray-300);
  margin-bottom: var(--spacing-md);
}

.empty-state h3,
.error-state h3 {
  margin: 0 0 var(--spacing-sm) 0;
  color: var(--color-gray-700);
}

.empty-state p,
.error-state p {
  margin: 0 0 var(--spacing-lg) 0;
}

/* BRD Table Container */
.brd-table-container {
  background: var(--color-white, #ffffff);
  border: 1px solid var(--color-gray-200, #e2e8f0);
  border-radius: var(--radius-xl, 16px);
  overflow: hidden;
}

.brd-table {
  width: 100%;
  border-collapse: collapse;
  font-size: var(--font-size-sm, 0.875rem);
}

.brd-table thead {
  background: var(--color-primary, #003D5B);
  border-bottom: none;
}

.brd-table th {
  padding: 0.875rem 1rem;
  text-align: left;
  font-size: var(--font-size-xs, 0.75rem);
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: var(--color-white, #ffffff);
  white-space: nowrap;
  user-select: none;
}

.brd-table tbody tr.brd-row {
  border-bottom: 1px solid var(--border-color-light, #f1f5f9);
  cursor: pointer;
  transition: background 0.2s;
}

.brd-table tbody tr.brd-row:hover {
  background: var(--bg-secondary, #f8fafc);
}

.brd-table tbody tr.brd-row.expanded {
  background: rgba(59, 130, 246, 0.05);
}

.brd-table td {
  padding: 0.875rem 0.75rem;
  vertical-align: middle;
}

/* Column widths */
.brd-table .col-expand { width: 50px; text-align: center; }
.brd-table .col-brd { min-width: 250px; }
.brd-table .col-repo { width: 180px; }
.brd-table .col-status { width: 120px; }
.brd-table .col-epics { width: 90px; }
.brd-table .col-backlogs { width: 100px; }
.brd-table .col-date { width: 120px; }
.brd-table .col-actions { width: 60px; }

.col-expand {
  display: flex;
  justify-content: center;
}

.expand-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  border: none;
  background: transparent;
  color: var(--color-gray-400);
  cursor: pointer;
  border-radius: var(--radius-sm);
  transition: all 0.15s;
}

.expand-btn:hover:not(:disabled) {
  background: var(--color-gray-100);
  color: var(--color-gray-700);
}

.expand-btn:disabled {
  opacity: 0.3;
  cursor: not-allowed;
}

.brd-cell {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm, 0.5rem);
  min-width: 0;
}

.brd-number {
  font-family: var(--font-mono);
  font-size: var(--font-size-xs);
  color: var(--color-primary);
  background: var(--color-primary-50);
  padding: 2px 8px;
  border-radius: var(--radius-sm);
  flex-shrink: 0;
  white-space: nowrap;
}

.brd-title {
  font-weight: 500;
  color: var(--color-gray-900);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.verified-badge {
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--color-success);
  flex-shrink: 0;
}

.col-repo .repo-name {
  color: var(--color-gray-600);
  font-size: var(--font-size-sm);
}

.col-date .date-text {
  color: var(--color-gray-500);
  font-size: var(--font-size-sm);
}

/* Expanded Row */
.brd-table tbody tr.expanded-row {
  background: var(--bg-secondary, #f8fafc);
}

.brd-table tbody tr.expanded-row td {
  padding: 0;
}

/* Status Badge */
.status-badge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 4px 8px;
  border-radius: var(--radius-sm);
  font-size: var(--font-size-xs);
  font-weight: 500;
}

.status-draft {
  background: var(--color-gray-100);
  color: var(--color-gray-600);
}

.status-progress {
  background: var(--color-info-50);
  color: var(--color-info);
}

.status-completed {
  background: var(--color-success-50);
  color: var(--color-success);
}

.status-approved {
  background: var(--color-primary-50);
  color: var(--color-primary);
}

.status-archived {
  background: var(--color-gray-200);
  color: var(--color-gray-500);
}

/* Count Badges */
.count-badge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 2px 8px;
  border-radius: var(--radius-sm);
  font-size: var(--font-size-xs);
  font-weight: 500;
}

.count-badge.epics {
  background: var(--color-purple-50);
  color: var(--color-purple);
}

.count-badge.backlogs {
  background: var(--color-blue-50);
  color: var(--color-blue);
}

/* Action Menu */

.action-menu-container {
  position: relative;
  display: flex;
  flex-shrink: 0;
}

.action-menu-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  border: none;
  background: transparent;
  color: var(--color-gray-400);
  cursor: pointer;
  border-radius: var(--radius-md);
  transition: all 0.15s;
}

.action-menu-btn:hover {
  background: var(--color-gray-100);
  color: var(--color-gray-700);
}

.action-menu {
  position: absolute;
  top: calc(100% + 4px);
  right: 0;
  z-index: 1000;
  min-width: 180px;
  background: var(--color-white);
  border: 1px solid var(--color-gray-200);
  border-radius: var(--radius-lg);
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12);
  padding: var(--spacing-sm);
}

.action-menu button {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  width: 100%;
  padding: 10px 12px;
  border: none;
  background: transparent;
  color: var(--color-gray-700);
  font-size: var(--font-size-sm);
  font-weight: 500;
  text-align: left;
  cursor: pointer;
  border-radius: var(--radius-md);
  transition: all 0.15s;
  white-space: nowrap;
}

.action-menu button:hover {
  background: var(--color-gray-100);
  color: var(--color-gray-900);
}

.action-menu button svg {
  flex-shrink: 0;
  color: var(--color-gray-500);
}

.action-menu button:hover svg {
  color: var(--color-gray-700);
}

.action-menu button.danger {
  color: var(--color-error);
}

.action-menu button.danger svg {
  color: var(--color-error);
}

.action-menu button.danger:hover {
  background: var(--color-error-50);
}

.action-menu hr {
  margin: var(--spacing-sm) 0;
  border: none;
  border-top: 1px solid var(--color-gray-200);
}

/* EPICs Container */
.epics-container {
  background: var(--color-gray-50);
  border-top: 1px solid var(--color-gray-200);
}

.epic-row-group {
  border-bottom: 1px solid var(--color-gray-200);
}

.epic-row-group:last-child {
  border-bottom: none;
}

.epic-row {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  padding: var(--spacing-sm) var(--spacing-lg);
  padding-left: 60px;
  transition: background-color 0.15s;
}

.epic-row:hover {
  background: var(--color-gray-100);
}

.epic-row.expanded {
  background: var(--color-purple-50);
}

.epic-info {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  flex: 1;
  min-width: 0;
}

.epic-info svg {
  color: var(--color-purple);
  flex-shrink: 0;
}

.epic-number {
  font-family: var(--font-mono);
  font-size: var(--font-size-xs);
  color: var(--color-purple);
  background: var(--color-purple-100);
  padding: 2px 6px;
  border-radius: var(--radius-sm);
  flex-shrink: 0;
}

.epic-title {
  color: var(--color-gray-700);
  font-size: var(--font-size-sm);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.epic-meta {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  flex-shrink: 0;
}

/* Priority Badge */
.priority-badge {
  padding: 2px 8px;
  border-radius: var(--radius-sm);
  font-size: var(--font-size-xs);
  font-weight: 500;
  text-transform: capitalize;
}

.priority-critical {
  background: var(--color-error-50);
  color: var(--color-error);
}

.priority-high {
  background: var(--color-warning-50);
  color: var(--color-warning);
}

.priority-medium {
  background: var(--color-info-50);
  color: var(--color-info);
}

.priority-low {
  background: var(--color-gray-100);
  color: var(--color-gray-500);
}

.effort-badge {
  padding: 2px 8px;
  background: var(--color-gray-100);
  color: var(--color-gray-600);
  border-radius: var(--radius-sm);
  font-size: var(--font-size-xs);
  font-weight: 500;
  text-transform: uppercase;
}

/* Backlogs Container */
.backlogs-container {
  background: var(--color-white);
  border-top: 1px solid var(--color-gray-200);
}

.backlog-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--spacing-sm) var(--spacing-lg);
  padding-left: 100px;
  border-bottom: 1px solid var(--color-gray-100);
  transition: background-color 0.15s;
}

.backlog-row:last-child {
  border-bottom: none;
}

.backlog-row:hover {
  background: var(--color-gray-50);
}

.backlog-info {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  min-width: 0;
}

.backlog-info svg {
  color: var(--color-blue);
  flex-shrink: 0;
}

.backlog-number {
  font-family: var(--font-mono);
  font-size: var(--font-size-xs);
  color: var(--color-blue);
  background: var(--color-blue-50);
  padding: 2px 6px;
  border-radius: var(--radius-sm);
  flex-shrink: 0;
}

.backlog-type {
  font-size: var(--font-size-xs);
  color: var(--color-gray-500);
  background: var(--color-gray-100);
  padding: 2px 6px;
  border-radius: var(--radius-sm);
  text-transform: capitalize;
}

.backlog-title {
  color: var(--color-gray-600);
  font-size: var(--font-size-sm);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.backlog-meta {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  flex-shrink: 0;
}

.points-badge {
  padding: 2px 8px;
  background: var(--color-gray-100);
  color: var(--color-gray-600);
  border-radius: var(--radius-sm);
  font-size: var(--font-size-xs);
  font-weight: 500;
}

/* Library View Responsive */
@media (max-width: 1200px) {
  .table-header,
  .brd-row {
    grid-template-columns: 44px 2fr 1fr 90px 70px 80px 110px;
  }
}

@media (max-width: 900px) {
  .filters-bar {
    flex-direction: column;
  }

  .search-input {
    max-width: none;
  }

  .table-header {
    display: none;
  }

  .brd-row {
    display: flex;
    flex-wrap: wrap;
    gap: var(--spacing-sm);
  }

  .col-expand {
    order: -1;
  }

  .col-brd {
    flex: 1;
    min-width: 200px;
  }

  .col-date {
    flex-shrink: 0;
    margin-left: auto;
  }

  .epic-row,
  .backlog-row {
    padding-left: var(--spacing-lg);
  }
}

/* ============================================
   BRD View Mode Styles
   ============================================ */

.generate-brd-page.view-mode {
  max-width: 1400px;
}

/* Back Button */
.generate-brd-page.view-mode .back-to-list-btn {
  margin-bottom: 1.5rem;
}

/* BRD Detail Header */
.brd-detail-header {
  margin-bottom: 1.5rem;
}

.brd-detail-title-section {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.brd-detail-title-section h1 {
  margin: 0;
  font-size: 1.75rem;
  color: var(--text-primary, #1e293b);
}

.brd-detail-meta {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  flex-wrap: wrap;
}

.brd-detail-meta .brd-id-badge {
  padding: 0.25rem 0.625rem;
  background: var(--color-primary-50, rgba(59, 130, 246, 0.1));
  color: var(--color-primary, #3b82f6);
  border-radius: 6px;
  font-size: 0.8125rem;
  font-weight: 600;
  font-family: 'SF Mono', 'Monaco', 'Inconsolata', monospace;
}

.brd-detail-meta .status-badge {
  padding: 0.375rem 0.75rem;
  border-radius: 20px;
  font-size: 0.75rem;
  font-weight: 500;
  text-transform: capitalize;
}

.brd-detail-meta .status-badge.draft {
  background: rgba(245, 158, 11, 0.15);
  color: var(--color-warning, #f59e0b);
}

.brd-detail-meta .status-badge.approved {
  background: rgba(139, 92, 246, 0.15);
  color: var(--color-accent, #8b5cf6);
}

.brd-detail-meta .verified-indicator {
  display: flex;
  align-items: center;
  gap: 0.375rem;
  padding: 0.375rem 0.75rem;
  background: rgba(16, 185, 129, 0.1);
  color: var(--color-success, #10b981);
  border-radius: 20px;
  font-size: 0.75rem;
  font-weight: 500;
}

.brd-detail-meta .editing-indicator {
  display: flex;
  align-items: center;
  gap: 0.375rem;
  padding: 0.375rem 0.75rem;
  background: rgba(59, 130, 246, 0.1);
  color: var(--color-primary, #3b82f6);
  border-radius: 20px;
  font-size: 0.75rem;
  font-weight: 500;
}

/* Legacy styles for backwards compatibility */
.brd-id-badge {
  font-family: var(--font-mono);
  font-size: var(--font-size-sm);
  color: var(--color-primary);
  background: var(--color-primary-50);
  padding: 4px 10px;
  border-radius: var(--radius-sm);
  font-weight: 600;
}

.verified-indicator {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 4px 10px;
  background: rgba(16, 185, 129, 0.1);
  color: var(--color-success);
  border-radius: var(--radius-sm);
  font-size: var(--font-size-sm);
  font-weight: 500;
}

/* Action Bar */
.brd-action-bar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 1rem 1.5rem;
  background: var(--bg-secondary, #f8fafc);
  border: 1px solid var(--border-color, #e2e8f0);
  border-radius: 12px;
  margin-bottom: 2rem;
  flex-wrap: wrap;
  gap: 1rem;
}

.action-bar-left {
  display: flex;
  align-items: center;
  gap: 1.5rem;
  flex-wrap: wrap;
}

.action-bar-left .repo-info,
.action-bar-left .date-info {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  color: var(--text-secondary, #64748b);
  font-size: 0.875rem;
}

.action-bar-left .repo-info svg,
.action-bar-left .date-info svg {
  color: var(--text-muted, #94a3b8);
}

.action-bar-right {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  flex-wrap: wrap;
}

@media (max-width: 768px) {
  .brd-action-bar {
    flex-direction: column;
    align-items: flex-start;
  }

  .action-bar-left {
    flex-direction: column;
    align-items: flex-start;
    gap: 0.75rem;
  }

  .action-bar-right {
    width: 100%;
    justify-content: flex-start;
  }
}

/* BRD Detail Content - Sections like EPIC */
.brd-detail-content {
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
}

.brd-detail-section {
  background: var(--color-white, #ffffff);
  border: 1px solid var(--border-color, #e2e8f0);
  border-radius: 12px;
  padding: 1.5rem;
}

.brd-detail-section .section-header-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 1rem;
  padding: 0;
  border: none;
  background: transparent;
}

.brd-detail-section .section-header-row h3 {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin: 0;
  font-size: 1rem;
  font-weight: 600;
  color: var(--text-primary, #1e293b);
}

.brd-detail-section .section-header-row h3 svg {
  color: var(--color-primary, #3b82f6);
}

.brd-detail-section .refine-btn {
  display: inline-flex;
  align-items: center;
  gap: 0.375rem;
  padding: 0.375rem 0.75rem;
  font-size: 0.75rem;
  border-radius: 6px;
  transition: all 0.2s;
}

.brd-detail-section .refine-btn.active {
  background: rgba(139, 92, 246, 0.1);
  border-color: var(--color-accent, #8b5cf6);
  color: var(--color-accent, #8b5cf6);
}

.brd-detail-section .section-refinement-input {
  background: rgba(139, 92, 246, 0.05);
  border: 1px solid rgba(139, 92, 246, 0.2);
  border-radius: 8px;
  padding: 1rem;
  margin-bottom: 1rem;
}

.brd-detail-section .section-refinement-input textarea {
  width: 100%;
  padding: 0.75rem;
  border: 1px solid var(--border-color, #e2e8f0);
  border-radius: 6px;
  font-size: 0.875rem;
  resize: vertical;
  margin-bottom: 0.75rem;
  font-family: inherit;
}

.brd-detail-section .section-refinement-input textarea:focus {
  outline: none;
  border-color: var(--color-accent, #8b5cf6);
  box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1);
}

.brd-detail-section .refinement-actions {
  display: flex;
  gap: 0.5rem;
}

.brd-detail-section .refinement-actions .btn {
  font-size: 0.75rem;
  padding: 0.375rem 0.75rem;
}

/* Fallback styles for h3 without section-header-row */
.brd-detail-section > h3 {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin: 0 0 1rem;
  font-size: 1rem;
  font-weight: 600;
  color: var(--text-primary, #1e293b);
}

.brd-detail-section > h3 svg {
  color: var(--color-primary, #3b82f6);
}

.brd-detail-section .section-content {
  color: var(--text-primary, #1e293b);
  font-size: 0.9375rem;
  line-height: 1.7;
}

.brd-detail-section .section-content p {
  margin: 0 0 1rem;
}

.brd-detail-section .section-content p:last-child {
  margin-bottom: 0;
}

.brd-detail-section .section-content ul,
.brd-detail-section .section-content ol {
  margin: 0 0 1rem;
  padding-left: 1.5rem;
}

.brd-detail-section .section-content li {
  margin-bottom: 0.5rem;
}

.brd-detail-section .section-content h1,
.brd-detail-section .section-content h2,
.brd-detail-section .section-content h3,
.brd-detail-section .section-content h4 {
  margin: 1.5rem 0 0.75rem;
  font-weight: 600;
  color: var(--text-primary, #1e293b);
}

.brd-detail-section .section-content h1:first-child,
.brd-detail-section .section-content h2:first-child,
.brd-detail-section .section-content h3:first-child,
.brd-detail-section .section-content h4:first-child {
  margin-top: 0;
}

.brd-detail-section .section-content code {
  background: var(--bg-tertiary, #f1f5f9);
  padding: 0.125rem 0.375rem;
  border-radius: 4px;
  font-size: 0.875em;
  font-family: 'SF Mono', 'Monaco', 'Inconsolata', monospace;
}

.brd-detail-section .section-content pre {
  background: var(--bg-tertiary, #f1f5f9);
  padding: 1rem;
  border-radius: 8px;
  overflow-x: auto;
  margin: 1rem 0;
}

.brd-detail-section .section-content pre code {
  background: none;
  padding: 0;
}

/* Legacy action-bar-left styles */
.action-bar-left .repo-info-legacy,
.action-bar-left .date-info {
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
  color: var(--color-gray-600);
  font-size: var(--font-size-sm);
}

.action-bar-right {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
}

/* BRD View Content */
.brd-view-content {
  display: flex;
  flex-direction: column;
  gap: 2rem;
}

.epic-card-link {
  background: var(--color-gray-50);
  border: 1px solid var(--color-gray-200);
  border-radius: var(--radius-lg);
  padding: var(--spacing-md);
  cursor: pointer;
  transition: all 0.2s;
}

.epic-card-link:hover {
  border-color: var(--color-primary);
  box-shadow: 0 4px 12px rgba(0, 61, 91, 0.1);
  transform: translateY(-2px);
}

.epic-card-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: var(--spacing-sm);
}

.epic-card-link .epic-number {
  font-family: var(--font-mono);
  font-size: var(--font-size-xs);
  color: var(--color-purple);
  background: var(--color-purple-50);
  padding: 2px 8px;
  border-radius: var(--radius-sm);
  font-weight: 600;
}

.epic-card-link h4 {
  margin: 0 0 var(--spacing-sm) 0;
  font-size: var(--font-size-base);
  color: var(--color-gray-900);
  line-height: 1.4;
}

.epic-card-meta {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
}

.epic-card-meta .backlog-count {
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: var(--font-size-sm);
  color: var(--color-gray-500);
}

/* BRD Content Section */
.brd-content-section {
  background: var(--color-white);
  border: 1px solid var(--color-gray-200);
  border-radius: var(--radius-xl);
  padding: var(--spacing-xl);
}

.brd-content-section .markdown-content {
  max-width: 100%;
}

.brd-content-section .markdown-content h1 {
  font-size: var(--font-size-2xl);
  color: var(--color-primary);
  margin-top: 0;
  padding-bottom: var(--spacing-md);
  border-bottom: 2px solid var(--color-primary-50);
}

.brd-content-section .markdown-content h2 {
  font-size: var(--font-size-xl);
  color: var(--color-gray-800);
  margin-top: var(--spacing-xl);
}

.brd-content-section .markdown-content h3 {
  font-size: var(--font-size-lg);
  color: var(--color-gray-700);
  margin-top: var(--spacing-lg);
}

.brd-content-section .markdown-content p,
.brd-content-section .markdown-content li {
  color: var(--color-gray-600);
  line-height: 1.7;
}

.brd-content-section .markdown-content ul,
.brd-content-section .markdown-content ol {
  padding-left: var(--spacing-lg);
}

.brd-content-section .markdown-content code {
  background: var(--color-gray-100);
  padding: 2px 6px;
  border-radius: 4px;
  font-size: 0.9em;
}

.brd-content-section .markdown-content pre {
  background: var(--color-gray-900);
  color: var(--color-gray-100);
  padding: var(--spacing-md);
  border-radius: var(--radius-md);
  overflow-x: auto;
}

.brd-content-section .markdown-content pre code {
  background: transparent;
  padding: 0;
  color: inherit;
}

.brd-content-section .markdown-content table {
  width: 100%;
  border-collapse: collapse;
  margin: var(--spacing-md) 0;
}

.brd-content-section .markdown-content th,
.brd-content-section .markdown-content td {
  border: 1px solid var(--color-gray-200);
  padding: var(--spacing-sm) var(--spacing-md);
  text-align: left;
}

.brd-content-section .markdown-content th {
  background: var(--color-gray-50);
  font-weight: 600;
}

/* Responsive View Mode */
@media (max-width: 768px) {
  .brd-action-bar {
    flex-direction: column;
    gap: var(--spacing-md);
    align-items: stretch;
  }

  .action-bar-left {
    flex-wrap: wrap;
  }

  .action-bar-right {
    flex-wrap: wrap;
    justify-content: flex-end;
  }

  .epics-list {
    grid-template-columns: 1fr;
  }
}

/* ============================================
   BRD Sections Display
   ============================================ */

.brd-sections {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xl);
}

.brd-section {
  padding-bottom: var(--spacing-lg);
  border-bottom: 1px solid var(--color-gray-200);
}

.brd-section:last-child {
  border-bottom: none;
  padding-bottom: 0;
}

.brd-section .section-title {
  font-size: var(--font-size-xl);
  font-weight: 600;
  color: var(--color-primary);
  margin: 0 0 var(--spacing-md) 0;
  padding-bottom: var(--spacing-sm);
  border-bottom: 2px solid var(--color-primary-50);
}

.brd-section .section-content {
  color: var(--color-gray-700);
  line-height: 1.7;
}

.brd-section .section-content p {
  margin: 0 0 var(--spacing-md) 0;
}

.brd-section .section-content ul,
.brd-section .section-content ol {
  margin: 0 0 var(--spacing-md) 0;
  padding-left: var(--spacing-lg);
}

.brd-section .section-content li {
  margin-bottom: var(--spacing-xs);
}

.brd-section .section-content h3 {
  font-size: var(--font-size-lg);
  font-weight: 600;
  color: var(--color-gray-800);
  margin: var(--spacing-lg) 0 var(--spacing-sm) 0;
}

.brd-section .section-content h4 {
  font-size: var(--font-size-base);
  font-weight: 600;
  color: var(--color-gray-700);
  margin: var(--spacing-md) 0 var(--spacing-xs) 0;
}

.brd-section .section-content strong {
  color: var(--color-gray-900);
}

.brd-section .section-content code {
  background: var(--color-gray-100);
  padding: 2px 6px;
  border-radius: 4px;
  font-size: 0.9em;
  font-family: var(--font-mono);
}

/* ============================================
   Edit Mode Styles
   ============================================ */

.editing-indicator {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 4px 10px;
  background: rgba(245, 158, 11, 0.1);
  color: var(--color-warning);
  border-radius: var(--radius-sm);
  font-size: var(--font-size-sm);
  font-weight: 500;
}

.brd-sections.edit-mode {
  gap: var(--spacing-lg);
}

.brd-section.editable {
  background: var(--color-gray-50);
  padding: var(--spacing-lg);
  border-radius: var(--radius-lg);
  border: 1px solid var(--color-gray-200);
}

.brd-section.editable .section-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: var(--spacing-md);
}

.brd-section.editable .section-title {
  margin: 0;
  padding: 0;
  border: none;
}

.section-editor {
  width: 100%;
  padding: var(--spacing-md);
  border: 1px solid var(--color-gray-300);
  border-radius: var(--radius-md);
  font-family: var(--font-mono);
  font-size: var(--font-size-sm);
  line-height: 1.6;
  background: var(--color-white);
  resize: vertical;
  min-height: 120px;
}

.section-editor:focus {
  outline: none;
  border-color: var(--color-primary);
  box-shadow: 0 0 0 3px rgba(0, 61, 91, 0.1);
}

@media (max-width: 768px) {
  .brd-section.editable {
    padding: var(--spacing-md);
  }
}

/* ============================================
   BRD View Mode - Collapsible Sections
   ============================================ */

.brd-sections.view-mode {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
}

.brd-section.collapsible {
  background: var(--color-white);
  border: 1px solid var(--color-gray-200);
  border-radius: var(--radius-lg);
  overflow: hidden;
  transition: all 0.2s ease;
}

.brd-section.collapsible:hover {
  border-color: var(--color-gray-300);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
}

.section-header-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--spacing-md) var(--spacing-lg);
  background: var(--bg-secondary, #f8fafc);
  border-bottom: 1px solid var(--color-gray-200);
}

.section-header-row.clickable {
  cursor: pointer;
  transition: background 0.2s;
}

.section-header-row.clickable:hover {
  background: var(--color-gray-100);
}

.brd-section.collapsed .section-header-row {
  border-bottom: none;
}

.section-header-row .section-title {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  margin: 0;
  padding: 0;
  border: none;
  font-size: 1rem;
  font-weight: 600;
  color: var(--text-primary, #1e293b);
}

.section-header-row .section-title svg {
  color: var(--color-primary, #003D5B);
  flex-shrink: 0;
}

.collapse-toggle {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  border: none;
  background: transparent;
  color: var(--text-secondary, #64748b);
  cursor: pointer;
  border-radius: var(--radius-sm);
  transition: all 0.2s;
}

.collapse-toggle:hover {
  background: var(--color-gray-200);
  color: var(--text-primary);
}

.brd-section.collapsible .section-content {
  padding: var(--spacing-lg);
  animation: slideDown 0.2s ease;
}

@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* ============================================
   BRD Edit Mode - AI Refinement
   ============================================ */

.brd-section.editable .section-header-row {
  background: transparent;
  border-bottom: none;
  padding: 0 0 var(--spacing-md) 0;
}

.refine-btn {
  display: inline-flex;
  align-items: center;
  gap: 0.375rem;
  padding: 0.375rem 0.75rem;
  font-size: 0.75rem;
  border-radius: var(--radius-md);
  transition: all 0.2s;
}

.refine-btn.active {
  background: rgba(139, 92, 246, 0.1);
  border-color: var(--color-accent, #8b5cf6);
  color: var(--color-accent, #8b5cf6);
}

.section-refinement-input {
  background: rgba(139, 92, 246, 0.05);
  border: 1px solid rgba(139, 92, 246, 0.2);
  border-radius: var(--radius-md);
  padding: var(--spacing-md);
  margin-bottom: var(--spacing-md);
}

.section-refinement-input textarea {
  width: 100%;
  padding: var(--spacing-sm) var(--spacing-md);
  border: 1px solid var(--color-gray-300);
  border-radius: var(--radius-sm);
  font-size: var(--font-size-sm);
  font-family: inherit;
  resize: vertical;
  margin-bottom: var(--spacing-sm);
}

.section-refinement-input textarea:focus {
  outline: none;
  border-color: var(--color-accent, #8b5cf6);
  box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1);
}

.refinement-actions {
  display: flex;
  gap: var(--spacing-sm);
}

.refinement-actions .btn {
  font-size: 0.75rem;
  padding: 0.375rem 0.75rem;
}

/* ============================================
   EPICs Table (at bottom of BRD view)
   Styled to match Jobs/Recent Executions grid
   ============================================ */

.linked-epics-section {
  background: var(--color-white);
  border: 1px solid var(--color-gray-200);
  border-radius: var(--radius-xl);
  padding: var(--spacing-xl);
}

.linked-epics-section .section-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: var(--spacing-lg);
  padding-bottom: var(--spacing-md);
  border-bottom: 1px solid var(--color-gray-100);
}

.linked-epics-section .section-header h3 {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin: 0;
  font-size: 1.125rem;
  font-weight: 600;
  color: var(--text-primary, #1e293b);
}

.linked-epics-section .section-header h3 svg {
  color: var(--color-primary, #3b82f6);
}

.epics-table-container {
  background: var(--color-white);
  border: 1px solid var(--color-gray-200);
  border-radius: var(--radius-lg);
  overflow: hidden;
}

.epics-table {
  width: 100%;
  border-collapse: collapse;
  font-size: var(--font-size-sm, 0.875rem);
}

/* Table Header - matching Jobs table */
.epics-table thead {
  background: var(--color-gray-50, #f8fafc);
  border-bottom: 1px solid var(--color-gray-200, #e2e8f0);
}

.epics-table th {
  padding: var(--spacing-md, 1rem) var(--spacing-sm, 0.5rem);
  text-align: left;
  font-weight: var(--font-weight-semibold, 600);
  color: var(--color-gray-600, #64748b);
  white-space: nowrap;
  user-select: none;
}

.epics-table td {
  padding: var(--spacing-md, 1rem) var(--spacing-sm, 0.5rem);
  text-align: left;
  vertical-align: middle;
  color: var(--text-primary, #1e293b);
}

/* Table Body */
.epics-table tbody tr.epic-row {
  border-bottom: 1px solid var(--color-gray-100, #f1f5f9);
  cursor: pointer;
  transition: background var(--transition-fast, 0.15s);
}

.epics-table tbody tr.epic-row:last-child {
  border-bottom: none;
}

.epics-table tbody tr.epic-row:hover {
  background: var(--color-gray-50, #f8fafc);
}

/* Column widths */
.epics-table .col-status { width: 120px; }
.epics-table .col-epic-id { width: 120px; }
.epics-table .col-title { min-width: 200px; }
.epics-table .col-backlogs { width: 100px; text-align: center; }
.epics-table .col-updated { width: 140px; }
.epics-table .col-actions { width: 100px; text-align: center; }

.epics-table .status-badge {
  display: inline-flex;
  align-items: center;
  gap: 0.375rem;
  padding: 0.25rem 0.625rem;
  border-radius: 12px;
  font-size: 0.75rem;
  font-weight: 500;
  text-transform: capitalize;
}

.epics-table .status-badge.draft {
  background: rgba(245, 158, 11, 0.15);
  color: var(--color-warning, #f59e0b);
}

.epics-table .status-badge.approved {
  background: rgba(139, 92, 246, 0.15);
  color: var(--color-accent, #8b5cf6);
}

.epics-table .epic-number {
  display: inline-flex;
  font-family: 'SF Mono', 'Monaco', 'Inconsolata', monospace;
  font-size: 0.75rem;
  padding: 0.25rem 0.5rem;
  background: rgba(59, 130, 246, 0.1);
  color: var(--color-primary, #3b82f6);
  border-radius: 4px;
  font-weight: 600;
}

.epics-table .col-title {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  max-width: 300px;
}

.epics-table .count-badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.375rem;
  padding: 0.25rem 0.625rem;
  background: var(--bg-tertiary, #f1f5f9);
  border-radius: 4px;
  font-size: 0.75rem;
  font-weight: 600;
  color: var(--text-secondary, #64748b);
}

.epics-table .col-updated {
  color: var(--text-secondary, #64748b);
  font-size: 0.8125rem;
}

.epics-table .col-actions .btn {
  padding: 0.375rem 0.75rem;
  font-size: 0.75rem;
}

/* Spin animation */
.spin {
  animation: spin 1s linear infinite;
}

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}
