# =============================================================================
# BRD Generator Environment Configuration
# =============================================================================

# ============================================
# PostgreSQL Configuration (Repository Storage)
# ============================================
# Option 1: Full connection URL
# DATABASE_URL=postgresql://user:password@localhost:5432/brd_generator

# Option 2: Individual components
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=brd_generator

# Database pool settings
DB_POOL_SIZE=5
DB_MAX_OVERFLOW=10
SQL_ECHO=false

# ============================================
# Repository Storage Configuration
# ============================================
# Root directory for cloned repositories
REPO_STORAGE_ROOT=/data/repositories

# Codegraph API URL (for code analysis)
CODEGRAPH_URL=http://localhost:8001

# ============================================
# Neo4j Configuration (for Code Graph MCP)
# ============================================
NEO4J_URI=bolt://localhost:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=your_password_here
NEO4J_DATABASE=codegraph
NEO4J_READ_ONLY=true

# ============================================
# GitHub Copilot CLI and SDK Configuration
# ============================================
# The BRD Generator uses the official GitHub Copilot CLI and SDK:
# - Copilot CLI: npm install -g @github/copilot
# - Copilot SDK: pip install github-copilot-sdk
#
# Authentication: Use a GitHub token with "Copilot Requests" permission
# Create at: https://github.com/settings/personal-access-tokens/new
GH_TOKEN=ghp_your_token_here
GITHUB_TOKEN=

# Copilot CLI path (optional - auto-detected if in PATH)
# Example: /usr/local/bin/github-copilot-cli
COPILOT_CLI_PATH=

# Model to use for generation
# Options: claude-sonnet-4.5, claude-haiku-4.5, claude-opus-4.5, gpt-4.1, gpt-5
COPILOT_MODEL=claude-sonnet-4.5

# Copilot SDK log level (debug, info, warning, error)
COPILOT_LOG_LEVEL=warning

# ============================================
# GitLab Configuration
# ============================================
# GitLab personal access token with api scope
# Create at: https://gitlab.com/-/profile/personal_access_tokens
GITLAB_TOKEN=glpat_your_token_here

# GitLab instance URL (for self-hosted GitLab)
# Default: https://gitlab.com
GITLAB_URL=https://gitlab.com

# GitLab MCP endpoint (auto-derived from GITLAB_URL)
# Default: https://gitlab.com/api/v4/mcp
GITLAB_MCP_URL=https://gitlab.com/api/v4/mcp

# ============================================
# MCP Server Configuration
# ============================================
# Enable/disable MCP servers
MCP_FILESYSTEM_ENABLED=true
MCP_NEO4J_ENABLED=true
MCP_GITHUB_ENABLED=true
MCP_GITLAB_ENABLED=true
MCP_ATLASSIAN_ENABLED=false

# Use GitHub MCP server to read source files directly from GitHub
# instead of local filesystem (requires GH_TOKEN with repo access)
# Default: false (use filesystem MCP with local clone)
MCP_USE_GITHUB_FOR_SOURCE=false

# Use GitLab MCP server to read source files directly from GitLab
# instead of local filesystem (requires GITLAB_TOKEN with api scope)
# Default: false (use filesystem MCP with local clone)
MCP_USE_GITLAB_FOR_SOURCE=false

# Skills directory for Copilot skills
MCP_SKILLS_DIR=/home/appuser/.github/skills

# Codebase root path (for filesystem MCP server)
CODEBASE_ROOT=/path/to/codebase

# ============================================
# Atlassian/JIRA Configuration (Phase 3)
# ============================================
# Enable JIRA integration to create Epics and Stories in JIRA
# Requires Atlassian API token from: https://id.atlassian.com/manage/api-tokens
#
# ATLASSIAN_URL: Your Atlassian instance URL
# ATLASSIAN_EMAIL: Your Atlassian account email
# ATLASSIAN_API_TOKEN: API token generated from Atlassian account
# JIRA_PROJECT_KEY: Default project for creating issues
ATLASSIAN_URL=https://your-domain.atlassian.net
ATLASSIAN_EMAIL=your-email@company.com
ATLASSIAN_API_TOKEN=your_api_token_here
JIRA_PROJECT_KEY=PROJ

# ============================================
# Application Settings
# ============================================
LOG_LEVEL=INFO
CACHE_TTL=600
MAX_CONTEXT_TOKENS=100000

# ============================================
# Docker-specific Settings (used in docker-compose)
# ============================================
# Path to the codebase to analyze (mounted as volume)
CODEBASE_PATH=../codebase
